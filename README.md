# 급발진 및 사고증명장치

창의공학설계 과제 계획서 팀03 / 
조장: 배각경 / 
팀원: 박기범, 지승현, 김영우, 김채환 / 


## 목차
- [1. 연구배경 및 필요성](#연구배경_및_필요성)
- [2. 관련기술의 현황](#관련기술)
- [3. 기대효과 및 활용](기대효과_및_활용)
- [4. 목표](#목표)
- [5. 내용](#내용)
- [6. 구현 방법](#구현방법)
- [7. 실제 구현](#실제구현)
- [8. 일정 및 팀원 역할](#일정_및_팀원역할)
- [9. 연구_중_문제와_해결](#문제_및_해결)
- [10. 참고문헌](#참고문헌)


## 연구배경_및_필요성  
김영우 - 5 / 지승현 - 5

자동차 급발진 사고는 매년 평균적으로 30~50건정도로 꽤 빈번히 일어나는 사고이다.
국립과학수사원은 이에 대해 조사를 착수, 최근 5년간의 급발진 의심 사고(364건)를 조사한 결과,
분석이 불가능한 일부 사례를 제외하고 주된 원인은 모두 ‘페달 오인’이었다.
(참고 기사: https://newautopost.co.kr/issue-plus/article/123221/)
최근 강릉에서 급발진 사고가 발생했다. 운전자는 이 사고 때문에 12살 된 손자를 잃었다. 
만약 해당 사고에서 자동차의 명확한 급발진 방지책이 있었다면, 이러한 비극은 일어나지 않았을 것이다.
이러한 사고를 방지하기 위해, 페달의 종류를 시각적으로 확인할 수 있는 장치가 필요하다.

 한편, 급발진 사고는 그 발생 이유를 명확히 밝히는 데 어려움이 있다.
현재 사용중인 EDR(event data recoder)은 충돌 전후로  5초간의 데이터만 기록하기 때문에, 전체적인 사고 맥락의 파악이 힘들다는 문제점이 있다. 
또한 EDR은 일반 운전자나 법률전문가가 해석하기 어려워, 제조사의 데이터 제공에 기대야만 한다. 
이는 제조사에 의해 데이터 접근이 제한되거나 해석 과정에서의 왜곡될 가능성이 있다. 
위와 같은 문제로 이 연구를 진행, ‘페달 오인 방지 및 사고증명 장치’를 제작한다.



## 관련기술
지승현 - 5 /  김영우 - 5

  자동차 급발진 감지 및 페달 감지 기술은 소프트 웨어, 자동차 안전 시스템의 발전에 
힘 입어 지속적으로 개선되고 있다.
 이러한 기술들은 차량의 안전성을 높이고, 사고를 예방하는 데 중요한 역할을 하고 있다.
페달 오조작 방지 장치의 경우, 한국교통안전공단은 이 기술의 개발 및 평가를 진행 중이며,
일본에서는 이미 차량의 93%에 해당 장치가 도입된 상황이다. 이를 통해 페달 오조작 사고로 인한 인명 피해를 효과적으로 줄이고 있다.
(참고 기사: https://it.chosun.com/news/articleView.html?idxno=2023092119030 )


## 기대효과_및_활용
배각경 - 5 / 지승현 - 5

사용하던 차량에 부착 가능한 점에서 실효성이 높다.
 운전자는 본인이 밟은 페달에 대한 명확한 구분이 가능해 진다. 
따라서 페달 오인 급가속 사고 방지에 큰 도움이 된다.
이전에는 제조사와 운전자의 엇갈리는 의견이 있었지만 (제동 페달 작동 기록이 남았더라도 페달을 ‘충분히 강하게 밟지 않았다’고 주장하면 반박할 길이 없었다)
제동 페달에 가해진 압력이 기록되면 브레이크 작동 여부에 대한 논란이 사그라질 가능성이 크다



## 목표
다 같이

     1.자동차의 각각의 페달에 압력센서 부착

     2.압력 센서에 가해진 압력의 정도를 측정 및 기록

        2-1.(사고 방지 목적) 압력센서에 압력이 가해질 시, 각각의 심볼이나 문자를 LCD모듈을 통해 출력

        2-2.(사고 증명 목적) 압력센서에 가해진 압력을 시간대별로 기록해, 누구나 보기 쉽도록 설계함.

     3.법률전문가나 일반 운전자가 확인하기 쉽게 설계해, 제조사 종속성을 줄인다.



## 내용
김영우

-압력 페달 센서 장치 설계 및 제작

-압력 페달 센서 장치 소프트웨어 설계

-운전 중 압력 수치를 저장할 수 있는 sd카드 소켓 연결

-압력 페달 센서 장치 실험(sd카드에 오류 없이 저장이 되는지,lcd에 출력되어야하는 내용들이 나오는지, 압력의 세기에 알맞게 압력 수치가 기록되는지 등)

Wokwi 구현 내용
박기범

![IMG_9836](https://github.com/user-attachments/assets/6454ca42-fafa-4ad9-9bbb-d5cdb2a22cda)
<전체 회로도(압력센서 --> 포션스미터 대체)>


## 구현방법
코드구현: 김채환 - 7 /  박기범 - 3

(1) 필요한 부품

● Arduino Mega (아두이노 메가)

● FSR402 압력센서

● SD카드 리더기 MPL115A2

● DS3231 RTC Modue 시계 모듈

● SD카드 4GB

● 브레드보드

● 점퍼케이블

● LCD 모듈 20 x 4

● 전원 공급장치



(2) 회로 구성 설명

FSR-402 압력 센서

FSR 센서의 한쪽 단자: Arduino Mega의 A0,A1  핀에 연결

FSR 센서의 다른 단자: GND에 연결

SD 카드 모듈

CS 핀: Arduino Mega의 디지털4번 핀에 연결

MOSI 핀: Arduino Mega의  51번 핀에 연결

MISO 핀: Arduino Mega의  50번 핀에 연결

SCK 핀: Arduino Mega의  52번 핀에 연결

VCC 핀: 5V에 연결

GND 핀: GND에 연결

DS3231 RTC 모듈

VCC 핀: 5V에 연결

GND 핀: GND에 연결

SDA 핀: Arduino Mega의  20번 핀에 연결

SCL 핀: Arduino Mega의  21번 핀에 연결



## 실제구현

박기범


![KakaoTalk_20241203_135626283](https://github.com/user-attachments/assets/bb296442-1719-4d1f-90e6-d67473dd74dd)

<사진 1>  압력센서를 통해 압력을 입력받는다



![KakaoTalk_20241203_135626283_01](https://github.com/user-attachments/assets/8a6ec7e1-1fe8-4295-b09c-d2b5783f30d4)


<사진 2>  SD카드를 연결해 데이터를 저장 및 기록한다



![KakaoTalk_20241203_135626283_03](https://github.com/user-attachments/assets/c6f231f9-a7f7-482c-a14d-e5a3fb361f5d)

<사진 3> RTC모듈로 실제 시간을 전달받아 LCD모듈과 SD모듈에 전달한다



![KakaoTalk_20241203_135626283_02](https://github.com/user-attachments/assets/deb16a4b-2785-49cb-bbde-30eff86dbbc3)

<사진 4>  LCD모듈을 통해 현재 시간과 압력센서값을 출력한다






작동 영상

https://github.com/user-attachments/assets/0fdd80c9-c11d-4a1a-8cf7-d808dc06f086



SD카드에 저장된 모습

![IMG_9834](https://github.com/user-attachments/assets/810f51f4-d64d-47e6-aaa0-847689e176b6)
<SD카드(display_LCD.ino참조)>


날짜별 SD데이터 파일 생성
김채환

![IMG_9913](https://github.com/user-attachments/assets/72f6f806-a724-4b8a-9a83-f2d29e2ac2d3)
<날짜별 새로운 파일 생성(seperate_SDfile.ino참조)>



## 일정_및_팀원역할

![IMG_9914](https://github.com/user-attachments/assets/e5ff542d-1095-4eb0-894a-a5a69a4dd100)



## 문제_및_해결

256GB SD카드를 적용한 경우 LCD에 데이터가 출력되지 않는 문제가 발생하였습니다.
처음에는 LCD 자체의 오류로 판단하여 SD카드와 관련된 코드를 제외한 상태에서 LCD 출력 테스트를 진행했으나, 
코드 자체에는 문제가 없음을 확인하였습니다. 이후 SD카드의 용량과 관련된 문제로 인식하여 
4GB SD카드를 사용해 동일한 코드를 실행해본 결과 정상적으로 작동하였습니다. 
추가 자료 조사 결과, LCD가 인식할 수 있는 SD카드 용량에 제한이 있다는 사실을 알게 되었고, 
이를 해결하기 위해 4GB SD카드를 사용하도록 수정하여 문제를 해결했습니다. - 박기범
 
압력센서가 살짝만 눌러도 값이 너무 크게 나와 이러한 문제를 파스칼로 계산하여 
값이 확 오르는 것이 아닌 천천히 오르게 코드를 수정 및 추가하여 문제를 해결했습니다. 
또한, 수치를 지정해서 일정 값이 되었을 때 어느 정도의 압력 임인가를 표기해서 
구분하기 쉽게 만들었습니다. – 김채환

실제 자동차에 적용시키기 힘들어 미니어처, 모형으로 제작하여 연구 적용 예정 – 김영우

데이터 삭제할 때 오래된 파일부터 삭제가 정상적으로 수행 되지 않아 앞으로 수정해야 하는 코드(delete_old_data.ino참조) – 박기범 5, 김채환 5

## 참고문헌
참고문헌 조사 – 지승현 5, 김영우 5

https://newautopost.co.kr/issue-plus/article/123221/
     <연구배경 참고 문헌(뉴스 기사)> - new auto post
     
https://it.chosun.com/news/articleView.html?idxno=2023092119030
     <관련 기술의 현황(뉴스 기사)> - IT조선
     
https://mobilitytv.co.kr/report/article/49954/
     <급발진 확인장치 만든 이유(사례)> - M mobility
     
https://www.instructables.com/Arduino-pressure-sensor-FSR-with-LCD-display/
     <아두이노 압력센서를 이용한 LCD 화면> - Autodesk Instructables(by NickW8)





